<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Selfie App</title>
</head>
<body>
    <h1>Welcome to the Selfie App</h1>
    <p>Latitude: <span id="latitude"></span>&deg;</p>
    <p>Longitude: <span id="longitude"></span>&deg;</p>

    <script>
    // test if geolocation is available
        if ("geolocation" in navigator) {
            // geolocation is available
            console.log("geolocation available");
            navigator.geolocation.getCurrentPosition(position => {
               const lat = position.coords.latitude;
               const lon = position.coords.longitude;
               document.getElementById("latitude").textContent = lat;
               document.getElementById("longitude").textContent = lon;

               const data = {lat,lon};
               const options ={
                    // declare the method fetch() will use
                   method : 'POST',
                   headers: {
                    // use the headers to explicit to the server the format of the post   
                       'Content-Type': 'application/json'},
                    // prepare the data to be sent as a JSON encoded string
                   body: JSON.stringify(data)
               }; 
               fetch('/api', options)
            });
        } else {
            // geolocation IS NOT available
            console.log("geolocation not available");
        }
    </script>
</body>
</html>